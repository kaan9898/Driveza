<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Driveza | Account</title>
  <link rel="stylesheet" th:href="@{/css/driveza-app.css}"/>
</head>

<body>

<header class="topbar">
  <div class="topbar__left">
    <a class="brand" th:href="@{/cars}">
      <img class="brand__logo" th:src="@{/images/logo.svg}" alt="Driveza"/>
      <span class="brand__name">Driveza</span>
    </a>
  </div>

  <nav class="topbar__nav">
    <a class="nav__link" th:href="@{/cars}">Cars</a>
    <a class="nav__link nav__link--active" th:href="@{/account}">Account</a>
  </nav>

  <div class="topbar__right">
    <form th:action="@{/logout}" method="post" style="display:inline;">
      <button class="btn btn--ghost" type="submit">Logout</button>
    </form>
  </div>
</header>

<main class="container">

  <section class="pageHead">
    <div>
      <h1 class="pageTitle">My Account</h1>
      <p class="pageSub">Manage your profile and security settings.</p>
    </div>

    <!-- Role badge -->
    <div>
            <span class="badge"
                  th:classappend="${user.role.name() == 'ADMIN'} ? ' badge--warn' : ' badge--ok'"
                  th:text="${user.role}">USER</span>
    </div>
  </section>

  <!-- Alerts (optional) -->
  <div class="alert alert--info" th:if="${param.updated}">
    Profile updated successfully.
  </div>
  <div class="alert alert--error" th:if="${param.error}">
    Something went wrong. Please try again.
  </div>

  <!-- Profile summary card -->
  <section class="card pad" style="margin-bottom:16px;">
    <div style="display:flex; gap:16px; align-items:center; justify-content:space-between; flex-wrap:wrap;">
      <div style="display:flex; gap:14px; align-items:center;">
        <div style="width:54px;height:54px;border-radius:14px;background:rgba(255,255,255,.08);
                            display:flex;align-items:center;justify-content:center;font-size:22px;">
          ðŸ‘¤
        </div>
        <div>
          <div style="font-weight:800; font-size:18px;" th:text="${user.name}">User Name</div>
          <div class="muted" th:text="${user.email}">user@email.com</div>
        </div>
      </div>

      <!-- Edit button (go to /account/edit later if you want) -->
      <a class="btn btn--ghost" th:href="@{/account/edit}">Edit Profile</a>
    </div>
  </section>

  <!-- Details + Security in two cards -->
  <section class="grid" style="grid-template-columns:1.2fr .8fr; gap:16px;">
    <!-- Account details -->
    <section class="card pad">
      <h2 style="margin:0 0 12px 0;">Account Details</h2>

      <div class="field">
        <label class="label">Full Name</label>
        <input class="input" type="text" th:value="${user.name}" readonly/>
      </div>

      <div class="field">
        <label class="label">Email</label>
        <input class="input" type="email" th:value="${user.email}" readonly/>
      </div>

      <div class="field">
        <label class="label">Date of Birth</label>
        <input class="input" type="text"
               th:value="${user.dob != null ? #temporals.format(user.dob, 'yyyy-MM-dd') : 'Not set'}"
               readonly/>
      </div>

      <div class="field">
        <label class="label">Role</label>
        <input class="input" type="text" th:value="${user.role}" readonly/>
      </div>

      <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
        <a class="btn" th:href="@{/account/edit}">Edit</a>
        <a class="btn btn--ghost" th:href="@{/cars}">Back to Cars</a>
      </div>
    </section>

    <!-- Security -->
    <section class="card pad">
      <h2 style="margin:0 0 12px 0;">Security</h2>

      <div class="field">
        <label class="label">Password</label>
        <input class="input" type="password" value="********" readonly/>
        <div class="muted" style="margin-top:6px;">For security, password is hidden.</div>
      </div>

      <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
        <!-- later connect to /account/change-password -->
        <a class="btn btn--ghost" th:href="@{/account/change-password}">Change Password</a>
      </div>

      <hr style="opacity:.15; margin:16px 0;"/>

      <div class="muted">
        Logged in as:
        <b sec:authentication="name">email</b>
      </div>
    </section>
  </section>

</main>

</body>
</html>